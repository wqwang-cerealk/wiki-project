(function(e){function t(t){for(var a,u,r=t[0],l=t[1],i=t[2],b=0,d=[];b<r.length;b++)u=r[b],Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&d.push(o[u][0]),o[u]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);s&&s(t);while(d.length)d.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(a=!1)}a&&(c.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},o={app:0},c=[];function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var i=0;i<r.length;i++)t(r[i]);var s=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"02a8":function(e,t,n){"use strict";n("d0ed")},"13fc":function(e,t,n){"use strict";n("5c47")},1964:function(e,t,n){"use strict";n("ae35")},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=c,e.exports=o,o.id="4678"},"5c47":function(e,t,n){},"6cf4":function(e,t,n){},"72c2":function(e,t,n){},"799a":function(e,t,n){},8092:function(e,t,n){"use strict";n("9630")},"8cc5":function(e,t,n){"use strict";n("799a")},9630:function(e,t,n){},9649:function(e,t,n){},ae35:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var a=n("7a23");function o(e,t,n,o,c,u){var r=Object(a["N"])("the-header"),l=Object(a["N"])("router-view"),i=Object(a["N"])("the-footer"),s=Object(a["N"])("a-layout");return Object(a["F"])(),Object(a["j"])(s,{id:"components-layout-demo-top-side-2"},{default:Object(a["X"])((function(){return[Object(a["o"])(r),Object(a["o"])(l),Object(a["o"])(i)]})),_:1})}var c=Object(a["m"])("div",{class:"logo"},null,-1),u={class:"login-menu"},r=Object(a["m"])("span",null,"logout",-1),l=[r],i={class:"login-menu"},s=Object(a["m"])("span",null,"login",-1),b=[s],d=Object(a["n"])("Home"),j=Object(a["n"])("User Management"),f=Object(a["n"])("Ebook Management"),O=Object(a["n"])("Category Management"),v=Object(a["n"])("About");function m(e,t,n,o,r,s){var m=Object(a["N"])("a-popconfirm"),p=Object(a["N"])("router-link"),g=Object(a["N"])("a-menu-item"),y=Object(a["N"])("a-menu"),h=Object(a["N"])("a-input"),k=Object(a["N"])("a-form-item"),_=Object(a["N"])("a-form"),X=Object(a["N"])("a-modal"),w=Object(a["N"])("a-layout-header");return Object(a["F"])(),Object(a["j"])(w,{class:"header"},{default:Object(a["X"])((function(){return[c,Object(a["o"])(m,{title:"confirm logout?","ok-text":"Yes","cancel-text":"No",onConfirm:t[0]||(t[0]=function(t){return e.logout()})},{default:Object(a["X"])((function(){return[Object(a["Y"])(Object(a["m"])("a",u,l,512),[[a["U"],e.user.id]])]})),_:1}),Object(a["Y"])(Object(a["m"])("a",i,[Object(a["m"])("span",null,"Welcome："+Object(a["Q"])(e.user.name),1)],512),[[a["U"],e.user.id]]),Object(a["Y"])(Object(a["m"])("a",{class:"login-menu",onClick:t[1]||(t[1]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.showLoginModal&&e.showLoginModal.apply(e,t)})},b,512),[[a["U"],!e.user.id]]),Object(a["o"])(y,{theme:"dark",mode:"horizontal",selectedKeys:e.selectedKeys1,"onUpdate:selectedKeys":t[2]||(t[2]=function(t){return e.selectedKeys1=t}),style:{lineHeight:"64px"}},{default:Object(a["X"])((function(){return[Object(a["o"])(g,{key:"home"},{default:Object(a["X"])((function(){return[Object(a["o"])(p,{to:"/"},{default:Object(a["X"])((function(){return[d]})),_:1})]})),_:1}),Object(a["o"])(g,{key:"/admin/user",style:Object(a["w"])(e.user.id?{}:{display:"none"})},{default:Object(a["X"])((function(){return[Object(a["o"])(p,{to:"/admin/user"},{default:Object(a["X"])((function(){return[j]})),_:1})]})),_:1},8,["style"]),Object(a["o"])(g,{key:"adminEbook",style:Object(a["w"])(e.user.id?{}:{display:"none"})},{default:Object(a["X"])((function(){return[Object(a["o"])(p,{to:"/admin/ebook"},{default:Object(a["X"])((function(){return[f]})),_:1})]})),_:1},8,["style"]),Object(a["o"])(g,{key:"admin/category",style:Object(a["w"])(e.user.id?{}:{display:"none"})},{default:Object(a["X"])((function(){return[Object(a["o"])(p,{to:"/admin/category"},{default:Object(a["X"])((function(){return[O]})),_:1})]})),_:1},8,["style"]),Object(a["o"])(g,{key:"about"},{default:Object(a["X"])((function(){return[Object(a["o"])(p,{to:"/about"},{default:Object(a["X"])((function(){return[v]})),_:1})]})),_:1})]})),_:1},8,["selectedKeys"]),Object(a["o"])(X,{title:"login",visible:e.loginModalVisible,"onUpdate:visible":t[5]||(t[5]=function(t){return e.loginModalVisible=t}),"confirm-loading":e.loginModalLoading,onOk:e.login},{default:Object(a["X"])((function(){return[Object(a["o"])(_,{model:e.loginUser,"label-col":{span:6},"wrapper-col":{span:18}},{default:Object(a["X"])((function(){return[Object(a["o"])(k,{label:"login name"},{default:Object(a["X"])((function(){return[Object(a["o"])(h,{value:e.loginUser.loginName,"onUpdate:value":t[3]||(t[3]=function(t){return e.loginUser.loginName=t})},null,8,["value"])]})),_:1}),Object(a["o"])(k,{label:"password"},{default:Object(a["X"])((function(){return[Object(a["o"])(h,{value:e.loginUser.password,"onUpdate:value":t[4]||(t[4]=function(t){return e.loginUser.password=t}),type:"password"},null,8,["value"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","confirm-loading","onOk"])]})),_:1})}var p=n("bc3a"),g=n.n(p),y=n("f64c"),h=n("5502"),k="USER",_=Object(h["a"])({state:{user:SessionStorage.get(k)||{}},mutations:{setUser:function(e,t){console.log("store user：",t),e.user=t,SessionStorage.set(k,t)}},actions:{},modules:{}}),X=_,w=Object(a["p"])({name:"the-header",setup:function(){var e=Object(a["h"])((function(){return X.state.user})),t=Object(a["K"])({loginName:"test1",password:"test123"}),n=Object(a["K"])(!1),o=Object(a["K"])(!1),c=function(){n.value=!0},u=function(){console.log("start logging in"),o.value=!0,t.value.password=hexMd5(t.value.password+KEY),g.a.post("/user/login",t.value).then((function(e){o.value=!1;var t=e.data;t.success?(n.value=!1,y["a"].success("login successfully！"),X.commit("setUser",t.content)):y["a"].error(t.message)}))},r=function(){console.log("start logging out"),g.a.get("/user/logout/"+e.value.token).then((function(e){var t=e.data;t.success?(y["a"].success("logout successfully！"),X.commit("setUser",{})):y["a"].error(t.message)}))};return{loginModalVisible:n,loginModalLoading:o,showLoginModal:c,loginUser:t,login:u,user:e,logout:r}}}),N=(n("8cc5"),n("6b0d")),C=n.n(N);const x=C()(w,[["render",m]]);var K=x,z=Object(a["n"])(" ADPN EBook ");function I(e,t,n,o,c,u){var r=Object(a["N"])("a-layout-footer");return Object(a["F"])(),Object(a["j"])(r,{style:{"text-align":"center"}},{default:Object(a["X"])((function(){return[z,Object(a["Y"])(Object(a["m"])("span",null,", welcome: "+Object(a["Q"])(e.user.name),513),[[a["U"],e.user.id]])]})),_:1})}var S=function(){function e(){}return e.isEmpty=function(e){return"string"===typeof e?!e||""===e.replace(/\s+/g,""):!e||"{}"===JSON.stringify(e)||0===e.length},e.isNotEmpty=function(e){return!this.isEmpty(e)},e.copy=function(t){if(e.isNotEmpty(t))return JSON.parse(JSON.stringify(t))},e.arrayToTree=function(t,n){if(e.isEmpty(t))return[];for(var a=[],o=0;o<t.length;o++){var c=t[o];if(Number(c.parent)===Number(n)){a.push(c);var u=e.arrayToTree(t,c.id);e.isNotEmpty(u)&&(c.children=u)}}return a},e.uuid=function(e,t){void 0===t&&(t=62);var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];t=t||n.length;for(var o=0;o<e;o++)a[o]=n[0|Math.random()*t];return a.join("")},e}(),U=n("56cd"),M=Object(a["p"])({name:"the-footer",setup:function(){var e,t,n=Object(a["h"])((function(){return X.state.user})),o=function(){console.log("WebSocket连接成功，状态码：",e.readyState)},c=function(e){console.log("WebSocket收到消息：",e.data),U["a"]["info"]({message:"get message",description:e.data})},u=function(){console.log("WebSocket连接错误，状态码：",e.readyState)},r=function(){console.log("WebSocket连接关闭，状态码：",e.readyState)},l=function(){e.onopen=o,e.onmessage=c,e.onerror=u,e.onclose=r};return Object(a["C"])((function(){"WebSocket"in window?(t=S.uuid(10),e=new WebSocket("/ws/"+t),l()):alert("当前浏览器 不支持")})),{user:n}}});const V=C()(M,[["render",I]]);var F=V,E=Object(a["p"])({name:"app",components:{theHeader:K,theFooter:F}});n("02a8");const T=C()(E,[["render",o]]);var A=T,R=n("6c02"),Q=function(e){return Object(a["I"])("data-v-0c77e005"),e=e(),Object(a["G"])(),e},L=Q((function(){return Object(a["m"])("span",null,"Welcome!",-1)})),H={class:"welcome"};function D(e,t,n,o,c,u){var r=Object(a["N"])("MailOutlined"),l=Object(a["N"])("a-menu-item"),i=Object(a["N"])("user-outlined"),s=Object(a["N"])("a-sub-menu"),b=Object(a["N"])("a-menu"),d=Object(a["N"])("a-layout-sider"),j=Object(a["N"])("the-welcome"),f=Object(a["N"])("router-link"),O=Object(a["N"])("a-avatar"),v=Object(a["N"])("a-list-item-meta"),m=Object(a["N"])("a-list-item"),p=Object(a["N"])("a-list"),g=Object(a["N"])("a-layout-content"),y=Object(a["N"])("a-layout");return Object(a["F"])(),Object(a["j"])(y,null,{default:Object(a["X"])((function(){return[Object(a["o"])(d,{width:"200",style:{background:"#fff"}},{default:Object(a["X"])((function(){return[Object(a["o"])(b,{mode:"inline",selectedKeys:e.selectedKeys2,"onUpdate:selectedKeys":t[0]||(t[0]=function(t){return e.selectedKeys2=t}),openKeys:e.openKeys,"onUpdate:openKeys":t[1]||(t[1]=function(t){return e.openKeys=t}),style:{height:"100%",borderRight:0},onClick:e.handleClick},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{key:"welcome"},{default:Object(a["X"])((function(){return[Object(a["o"])(r),L]})),_:1}),(Object(a["F"])(!0),Object(a["l"])(a["b"],null,Object(a["M"])(e.level1,(function(e){return Object(a["F"])(),Object(a["j"])(s,{key:e.id},{title:Object(a["X"])((function(){return[Object(a["m"])("span",null,[Object(a["o"])(i),Object(a["n"])(Object(a["Q"])(e.name),1)])]})),default:Object(a["X"])((function(){return[(Object(a["F"])(!0),Object(a["l"])(a["b"],null,Object(a["M"])(e.children,(function(e){return Object(a["F"])(),Object(a["j"])(l,{key:e.id},{default:Object(a["X"])((function(){return[Object(a["o"])(r),Object(a["m"])("span",null,Object(a["Q"])(e.name),1)]})),_:2},1024)})),128))]})),_:2},1024)})),128))]})),_:1},8,["selectedKeys","openKeys","onClick"])]})),_:1}),Object(a["o"])(g,{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},{default:Object(a["X"])((function(){return[Object(a["Y"])(Object(a["m"])("div",H,[Object(a["o"])(j)],512),[[a["U"],e.isShowWelcome]]),Object(a["Y"])(Object(a["o"])(p,{"item-layout":"vertical",size:"large",grid:{gutter:20,column:3},"data-source":e.ebooks},{renderItem:Object(a["X"])((function(e){var t=e.item;return[Object(a["o"])(m,{key:"item.name"},{actions:Object(a["X"])((function(){return[Object(a["m"])("span",null,[(Object(a["F"])(),Object(a["j"])(Object(a["O"])("FileOutlined"),{style:{"margin-right":"8px"}})),Object(a["n"])(" "+Object(a["Q"])(t.docCount),1)]),Object(a["m"])("span",null,[(Object(a["F"])(),Object(a["j"])(Object(a["O"])("UserOutlined"),{style:{"margin-right":"8px"}})),Object(a["n"])(" "+Object(a["Q"])(t.viewCount),1)]),Object(a["m"])("span",null,[(Object(a["F"])(),Object(a["j"])(Object(a["O"])("LikeOutlined"),{style:{"margin-right":"8px"}})),Object(a["n"])(" "+Object(a["Q"])(t.voteCount),1)])]})),default:Object(a["X"])((function(){return[Object(a["o"])(v,{description:t.description},{title:Object(a["X"])((function(){return[Object(a["o"])(f,{to:"/doc?ebookId="+t.id},{default:Object(a["X"])((function(){return[Object(a["n"])(Object(a["Q"])(t.name),1)]})),_:2},1032,["to"])]})),avatar:Object(a["X"])((function(){return[Object(a["o"])(O,{src:t.cover},null,8,["src"])]})),_:2},1032,["description"])]})),_:2},1024)]})),_:1},8,["data-source"]),[[a["U"],!e.isShowWelcome]])]})),_:1})]})),_:1})}var P=Object(a["m"])("br",null,null,-1),q=Object(a["m"])("br",null,null,-1),Y=Object(a["m"])("div",{id:"main",style:{width:"100%",height:"300px"}},null,-1);function W(e,t,n,o,c,u){var r=Object(a["N"])("UserOutlined"),l=Object(a["N"])("a-statistic"),i=Object(a["N"])("a-col"),s=Object(a["N"])("like-outlined"),b=Object(a["N"])("a-row"),d=Object(a["N"])("a-card"),j=Object(a["N"])("arrow-down-outlined"),f=Object(a["N"])("arrow-up-outlined");return Object(a["F"])(),Object(a["l"])("div",null,[Object(a["o"])(b,null,{default:Object(a["X"])((function(){return[Object(a["o"])(i,{span:24},{default:Object(a["X"])((function(){return[Object(a["o"])(d,null,{default:Object(a["X"])((function(){return[Object(a["o"])(b,null,{default:Object(a["X"])((function(){return[Object(a["o"])(i,{span:8},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{title:"Total view count",value:e.statistic.viewCount},{suffix:Object(a["X"])((function(){return[Object(a["o"])(r)]})),_:1},8,["value"])]})),_:1}),Object(a["o"])(i,{span:8},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{title:"Total vote count",value:e.statistic.voteCount},{suffix:Object(a["X"])((function(){return[Object(a["o"])(s)]})),_:1},8,["value"])]})),_:1}),Object(a["o"])(i,{span:8},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{title:"vote rate",value:e.statistic.voteCount/e.statistic.viewCount*100,precision:2,suffix:"%","value-style":{color:"#cf1322"}},{suffix:Object(a["X"])((function(){return[Object(a["o"])(s)]})),_:1},8,["value"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),P,Object(a["o"])(b,{gutter:16},{default:Object(a["X"])((function(){return[Object(a["o"])(i,{span:12},{default:Object(a["X"])((function(){return[Object(a["o"])(d,null,{default:Object(a["X"])((function(){return[Object(a["o"])(b,null,{default:Object(a["X"])((function(){return[Object(a["o"])(i,{span:12},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{title:"today`s view count",value:e.statistic.todayViewCount,style:{"margin-right":"50px"}},{suffix:Object(a["X"])((function(){return[Object(a["o"])(r)]})),_:1},8,["value"])]})),_:1}),Object(a["o"])(i,{span:12},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{title:"today`s vote count",value:e.statistic.todayVoteCount},{suffix:Object(a["X"])((function(){return[Object(a["o"])(s)]})),_:1},8,["value"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(a["o"])(i,{span:12},{default:Object(a["X"])((function(){return[Object(a["o"])(d,null,{default:Object(a["X"])((function(){return[Object(a["o"])(b,null,{default:Object(a["X"])((function(){return[Object(a["o"])(i,{span:12},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{title:"prediction of today`s view count",value:e.statistic.todayViewIncrease,"value-style":{color:"#0000ff"}},{suffix:Object(a["X"])((function(){return[Object(a["o"])(r)]})),_:1},8,["value"])]})),_:1}),Object(a["o"])(i,{span:12},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{title:"prediction of today`s view count increase",value:e.statistic.todayViewIncreaseRateAbs,precision:2,suffix:"%",class:"demo-class","value-style":e.statistic.todayViewIncreaseRate<0?{color:"#3f8600"}:{color:"#cf1322"}},{prefix:Object(a["X"])((function(){return[e.statistic.todayViewIncreaseRate<0?(Object(a["F"])(),Object(a["j"])(j,{key:0})):Object(a["k"])("",!0),e.statistic.todayViewIncreaseRate>=0?(Object(a["F"])(),Object(a["j"])(f,{key:1})):Object(a["k"])("",!0)]})),_:1},8,["value","value-style"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),q,(Object(a["F"])(),Object(a["j"])(b,{key:0},{default:Object(a["X"])((function(){return[Object(a["o"])(i,{span:24},{default:Object(a["X"])((function(){return[Y]})),_:1})]})),_:1}))])}var J=Object(a["p"])({name:"the-welcome",setup:function(){var e=Object(a["K"])();e.value={};var t=function(){g.a.get("/ebook-snapshot/get-statistic").then((function(t){var n=t.data;if(n.success){var a=n.content;e.value.viewCount=a[1].viewCount,e.value.voteCount=a[1].voteCount,e.value.todayViewCount=a[1].viewIncrease,e.value.todayVoteCount=a[1].voteIncrease;var o=new Date,c=(60*o.getHours()+o.getMinutes())/1440;e.value.todayViewIncrease=parseInt(String(a[1].viewIncrease/c)),e.value.todayViewIncreaseRate=(e.value.todayViewIncrease-a[0].viewIncrease)/a[0].viewIncrease*100,e.value.todayViewIncreaseRateAbs=Math.abs(e.value.todayViewIncreaseRate)}}))},n=function(e){for(var t=echarts.init(document.getElementById("main")),n=[],a=[],o=[],c=0;c<e.length;c++){var u=e[c];n.push(u.date),a.push(u.viewIncrease),o.push(u.voteIncrease)}var r={title:{text:"30 days tendency chart"},tooltip:{trigger:"axis"},legend:{data:["Total view count","Total vote count"]},grid:{left:"1%",right:"3%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:n},yAxis:{type:"value"},series:[{name:"Total view count",type:"line",data:a,smooth:!0},{name:"Total vote count",type:"line",data:o,smooth:!0}]};t.setOption(r)},o=function(){g.a.get("/ebook-snapshot/get-30-statistic").then((function(e){var t=e.data;if(console.log("*** 30 days data ***",t),t.success){var a=t.content;n(a)}}))};return Object(a["C"])((function(){t(),o()})),{statistic:e}}});const B=C()(J,[["render",W]]);var G=B,Z=Object(a["p"])({name:"Home",components:{TheWelcome:G},setup:function(){console.log("setup");var e,t=Object(a["K"])(),n=Object(a["K"])(),o=function(){g.a.get("/category/all").then((function(t){var a=t.data;a.success?(e=a.content,console.log("original array：",e),n.value=[],n.value=S.arrayToTree(e,0),console.log("tree form：",n.value)):y["a"].error(a.message)}))},c=Object(a["K"])(!0),u=0,r=function(){g.a.get("/ebook/list",{params:{page:1,size:1e3,categoryId2:u}}).then((function(e){var n=e.data;t.value=n.content.list}))},l=function(e){"welcome"===e.key?c.value=!0:(u=e.key,c.value=!1,r())};return Object(a["C"])((function(){o()})),{ebooks:t,pagination:{onChange:function(e){console.log(e)},pageSize:3},handleClick:l,level1:n,isShowWelcome:c}}});n("d58e");const $=C()(Z,[["render",D],["__scopeId","data-v-0c77e005"]]);var ee=$;const te={class:"about"},ne=Object(a["m"])("h1",null,"About us",-1),ae=[ne];function oe(e,t){return Object(a["F"])(),Object(a["l"])("div",te,ae)}const ce={},ue=C()(ce,[["render",oe]]);var re=ue,le={key:0},ie=Object(a["n"])("     "),se=["innerHTML"],be={class:"vote-div"};function de(e,t,n,o,c,u){var r=Object(a["N"])("a-tree"),l=Object(a["N"])("a-col"),i=Object(a["N"])("a-divider"),s=Object(a["N"])("LikeOutlined"),b=Object(a["N"])("a-button"),d=Object(a["N"])("a-row"),j=Object(a["N"])("a-layout-content"),f=Object(a["N"])("a-layout");return Object(a["F"])(),Object(a["j"])(f,null,{default:Object(a["X"])((function(){return[Object(a["o"])(j,{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},{default:Object(a["X"])((function(){return[0===e.level1.length?(Object(a["F"])(),Object(a["l"])("h3",le,"No related doc for this book")):Object(a["k"])("",!0),Object(a["o"])(d,null,{default:Object(a["X"])((function(){return[Object(a["o"])(l,{span:6},{default:Object(a["X"])((function(){return[e.level1.length>0?(Object(a["F"])(),Object(a["j"])(r,{key:0,"tree-data":e.level1,onSelect:e.onSelect,replaceFields:{title:"name",key:"id",value:"id"},defaultExpandAll:!0,defaultSelectedKeys:e.defaultSelectedKeys},null,8,["tree-data","onSelect","defaultSelectedKeys"])):Object(a["k"])("",!0)]})),_:1}),Object(a["o"])(l,{span:18},{default:Object(a["X"])((function(){return[Object(a["m"])("div",null,[Object(a["m"])("h2",null,Object(a["Q"])(e.doc.name),1),Object(a["m"])("div",null,[Object(a["m"])("span",null,"View Count："+Object(a["Q"])(e.doc.viewCount),1),ie,Object(a["m"])("span",null,"Vote Count："+Object(a["Q"])(e.doc.voteCount),1)]),Object(a["o"])(i,{style:{height:"2px","background-color":"#9999cc"}})]),Object(a["m"])("div",{class:"wangeditor",innerHTML:e.html},null,8,se),Object(a["m"])("div",be,[Object(a["o"])(b,{type:"primary",shape:"round",size:"large",onClick:e.vote},{icon:Object(a["X"])((function(){return[Object(a["o"])(s),Object(a["n"])("  Vote："+Object(a["Q"])(e.doc.voteCount),1)]})),_:1},8,["onClick"])])]})),_:1})]})),_:1})]})),_:1})]})),_:1})}var je=Object(a["p"])({name:"Doc",setup:function(){var e=Object(R["c"])(),t=Object(a["K"])(),n=Object(a["K"])(),o=Object(a["K"])();o.value=[];var c=Object(a["K"])();c.value={};var u=Object(a["K"])();u.value=[];var r=function(e){g.a.get("/doc/find-content/"+e).then((function(e){var t=e.data;t.success?n.value=t.content:y["a"].error(t.message)}))},l=function(){console.log("-----------------------",e.query.ebookId),g.a.get("/doc/all/"+e.query.ebookId).then((function(e){var n=e.data;n.success?(t.value=n.content,u.value=[],u.value=S.arrayToTree(t.value,0),S.isNotEmpty(u)&&(o.value=[u.value[0].id],r(u.value[0].id),c.value=u.value[0])):y["a"].error(n.message)}))},i=function(e,t){console.log("selected",e,t),S.isNotEmpty(e)&&(c.value=t.selectedNodes[0].props,r(e[0]))},s=function(){g.a.get("/doc/vote/"+c.value.id).then((function(e){var t=e.data;t.success?c.value.voteCount++:y["a"].error(t.message)}))};return Object(a["C"])((function(){l()})),{level1:u,html:n,onSelect:i,defaultSelectedKeys:o,doc:c,vote:s}}});n("8092");const fe=C()(je,[["render",de]]);var Oe=fe,ve=Object(a["n"])(" Find "),me=Object(a["n"])(" Add New "),pe=Object(a["n"])(" reset password "),ge=Object(a["n"])(" Edit "),ye=Object(a["n"])(" Delete ");function he(e,t,n,o,c,u){var r=Object(a["N"])("a-input"),l=Object(a["N"])("a-form-item"),i=Object(a["N"])("a-button"),s=Object(a["N"])("a-form"),b=Object(a["N"])("a-popconfirm"),d=Object(a["N"])("a-space"),j=Object(a["N"])("a-table"),f=Object(a["N"])("a-layout-content"),O=Object(a["N"])("a-layout"),v=Object(a["N"])("a-modal");return Object(a["F"])(),Object(a["l"])(a["b"],null,[Object(a["o"])(O,null,{default:Object(a["X"])((function(){return[Object(a["o"])(f,{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},{default:Object(a["X"])((function(){return[Object(a["m"])("p",null,[Object(a["o"])(s,{layout:"inline",model:e.param},{default:Object(a["X"])((function(){return[Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(r,{value:e.param.loginName,"onUpdate:value":t[0]||(t[0]=function(t){return e.param.loginName=t}),placeholder:"登陆名"},null,8,["value"])]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(i,{type:"primary",onClick:t[1]||(t[1]=function(t){return e.handleQuery({page:1,size:e.pagination.pageSize})})},{default:Object(a["X"])((function(){return[ve]})),_:1})]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(i,{type:"primary",onClick:t[2]||(t[2]=function(t){return e.add()})},{default:Object(a["X"])((function(){return[me]})),_:1})]})),_:1})]})),_:1},8,["model"])]),Object(a["o"])(j,{columns:e.columns,"row-key":function(e){return e.id},"data-source":e.users,pagination:e.pagination,loading:e.loading,onChange:e.handleTableChange},{action:Object(a["X"])((function(t){t.text;var n=t.record;return[Object(a["o"])(d,{size:"small"},{default:Object(a["X"])((function(){return[Object(a["o"])(i,{type:"primary",onClick:function(t){return e.resetPassword(n)}},{default:Object(a["X"])((function(){return[pe]})),_:2},1032,["onClick"]),Object(a["o"])(i,{type:"primary",onClick:function(t){return e.edit(n)}},{default:Object(a["X"])((function(){return[ge]})),_:2},1032,["onClick"]),Object(a["o"])(b,{title:"cannot be recovered after deletion, are you sure to delete?","ok-text":"Yes","cancel-text":"No",onConfirm:function(t){return e.handleDelete(n.id)}},{default:Object(a["X"])((function(){return[Object(a["o"])(i,{type:"danger"},{default:Object(a["X"])((function(){return[ye]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:2},1024)]})),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]})),_:1})]})),_:1}),Object(a["o"])(v,{title:"User table",visible:e.modalVisible,"onUpdate:visible":t[6]||(t[6]=function(t){return e.modalVisible=t}),"confirm-loading":e.modalLoading,onOk:e.handleModalOk},{default:Object(a["X"])((function(){return[Object(a["o"])(s,{model:e.user,"label-col":{span:6},"wrapper-col":{span:18}},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{label:"login name"},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{value:e.user.loginName,"onUpdate:value":t[3]||(t[3]=function(t){return e.user.loginName=t}),disabled:!!e.user.id},null,8,["value","disabled"])]})),_:1}),Object(a["o"])(l,{label:"username"},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{value:e.user.name,"onUpdate:value":t[4]||(t[4]=function(t){return e.user.name=t})},null,8,["value"])]})),_:1}),Object(a["Y"])(Object(a["o"])(l,{label:"password"},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{value:e.user.password,"onUpdate:value":t[5]||(t[5]=function(t){return e.user.password=t})},null,8,["value"])]})),_:1},512),[[a["U"],!e.user.id]])]})),_:1},8,["model"])]})),_:1},8,["visible","confirm-loading","onOk"]),Object(a["o"])(v,{title:"重置密码",visible:e.resetModalVisible,"onUpdate:visible":t[8]||(t[8]=function(t){return e.resetModalVisible=t}),"confirm-loading":e.resetModalLoading,onOk:e.handleResetModalOk},{default:Object(a["X"])((function(){return[Object(a["o"])(s,{model:e.user,"label-col":{span:6},"wrapper-col":{span:18}},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{label:"new password"},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{value:e.user.password,"onUpdate:value":t[7]||(t[7]=function(t){return e.user.password=t})},null,8,["value"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","confirm-loading","onOk"])],64)}var ke=Object(a["p"])({name:"AdminUser",setup:function(){var e=Object(a["K"])();e.value={};var t=Object(a["K"])(),n=Object(a["K"])({current:1,pageSize:10,total:0}),o=Object(a["K"])(!1),c=[{title:"login name",dataIndex:"loginName"},{title:"name",dataIndex:"name"},{title:"password",dataIndex:"password"},{title:"Action",key:"action",slots:{customRender:"action"}}],u=function(a){o.value=!0,t.value=[],g.a.get("/user/list",{params:{page:a.page,size:a.size,loginName:e.value.loginName}}).then((function(e){o.value=!1;var c=e.data;c.success?(t.value=c.content.list,n.value.current=a.page,n.value.total=c.content.total):y["a"].error(c.message)}))},r=function(e){console.log("看看自带的分页参数都有啥："+e),u({page:e.current,size:e.pageSize})},l=Object(a["K"])(),i=Object(a["K"])(!1),s=Object(a["K"])(!1),b=function(){s.value=!0,l.value.password=hexMd5(l.value.password+KEY),g.a.post("/user/save",l.value).then((function(e){s.value=!1;var t=e.data;t.success?(i.value=!1,u({page:n.value.current,size:n.value.pageSize})):y["a"].error(t.message)}))},d=function(e){i.value=!0,l.value=S.copy(e)},j=function(){i.value=!0,l.value={}},f=function(e){g.a.delete("/user/delete/"+e).then((function(e){var t=e.data;t.success&&u({page:n.value.current,size:n.value.pageSize})}))},O=Object(a["K"])(!1),v=Object(a["K"])(!1),m=function(){v.value=!0,l.value.password=hexMd5(l.value.password+KEY),g.a.post("/user/reset-password",l.value).then((function(e){v.value=!1;var t=e.data;t.success?(O.value=!1,u({page:n.value.current,size:n.value.pageSize})):y["a"].error(t.message)}))},p=function(e){O.value=!0,l.value=S.copy(e),l.value.password=null};return Object(a["C"])((function(){u({page:1,size:n.value.pageSize})})),{param:e,users:t,pagination:n,columns:c,loading:o,handleTableChange:r,handleQuery:u,edit:d,add:j,user:l,modalVisible:i,modalLoading:s,handleModalOk:b,handleDelete:f,resetModalVisible:O,resetModalLoading:v,handleResetModalOk:m,resetPassword:p}}});n("d64b");const _e=C()(ke,[["render",he],["__scopeId","data-v-45c7106d"]]);var Xe=_e,we=Object(a["n"])(" search "),Ne=Object(a["n"])(" create "),Ce=["src"],xe=Object(a["n"])(" doc management "),Ke=Object(a["n"])(" edit "),ze=Object(a["n"])(" delete ");function Ie(e,t,n,o,c,u){var r=Object(a["N"])("a-input"),l=Object(a["N"])("a-form-item"),i=Object(a["N"])("a-button"),s=Object(a["N"])("a-form"),b=Object(a["N"])("router-link"),d=Object(a["N"])("a-popconfirm"),j=Object(a["N"])("a-space"),f=Object(a["N"])("a-table"),O=Object(a["N"])("a-layout-content"),v=Object(a["N"])("a-layout"),m=Object(a["N"])("a-cascader"),p=Object(a["N"])("a-modal");return Object(a["F"])(),Object(a["l"])(a["b"],null,[Object(a["o"])(v,null,{default:Object(a["X"])((function(){return[Object(a["o"])(O,{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},{default:Object(a["X"])((function(){return[Object(a["m"])("p",null,[Object(a["o"])(s,{layout:"inline",model:e.param},{default:Object(a["X"])((function(){return[Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(r,{value:e.param.name,"onUpdate:value":t[0]||(t[0]=function(t){return e.param.name=t}),placeholder:"名称"},null,8,["value"])]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(i,{type:"primary",onClick:t[1]||(t[1]=function(t){return e.handleQuery({page:1,size:e.pagination.pageSize})})},{default:Object(a["X"])((function(){return[we]})),_:1})]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(i,{type:"primary",onClick:t[2]||(t[2]=function(t){return e.add()})},{default:Object(a["X"])((function(){return[Ne]})),_:1})]})),_:1})]})),_:1},8,["model"])]),Object(a["o"])(f,{columns:e.columns,"row-key":function(e){return e.id},"data-source":e.ebooks,pagination:e.pagination,loading:e.loading,onChange:e.handleTableChange},{cover:Object(a["X"])((function(e){var t=e.text;return[t?(Object(a["F"])(),Object(a["l"])("img",{key:0,src:t,alt:"avatar"},null,8,Ce)):Object(a["k"])("",!0)]})),category:Object(a["X"])((function(t){t.text;var n=t.record;return[Object(a["m"])("span",null,Object(a["Q"])(e.getCategoryName(n.category1Id))+" / "+Object(a["Q"])(e.getCategoryName(n.category2Id)),1)]})),action:Object(a["X"])((function(t){t.text;var n=t.record;return[Object(a["o"])(j,{size:"small"},{default:Object(a["X"])((function(){return[Object(a["o"])(b,{to:"/admin/doc?ebookId="+n.id},{default:Object(a["X"])((function(){return[Object(a["o"])(i,{type:"primary"},{default:Object(a["X"])((function(){return[xe]})),_:1})]})),_:2},1032,["to"]),Object(a["o"])(i,{type:"primary",onClick:function(t){return e.edit(n)}},{default:Object(a["X"])((function(){return[Ke]})),_:2},1032,["onClick"]),Object(a["o"])(d,{title:"Are you sure you want to delete this book?","ok-text":"Yes","cancel-text":"No",onConfirm:function(t){return e.del(n.id)}},{default:Object(a["X"])((function(){return[Object(a["o"])(i,{type:"danger"},{default:Object(a["X"])((function(){return[ze]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:2},1024)]})),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]})),_:1})]})),_:1}),Object(a["o"])(p,{title:"eBook table",visible:e.modalVisible,"onUpdate:visible":t[7]||(t[7]=function(t){return e.modalVisible=t}),"confirm-loading":e.modalLoading,onOk:e.handleModalOk},{default:Object(a["X"])((function(){return[Object(a["o"])(s,{model:e.ebook,"label-col":{span:6},"wrapper-col":{span:18}},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{label:"Cover"},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{value:e.ebook.cover,"onUpdate:value":t[3]||(t[3]=function(t){return e.ebook.cover=t})},null,8,["value"])]})),_:1}),Object(a["o"])(l,{label:"Name"},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{value:e.ebook.name,"onUpdate:value":t[4]||(t[4]=function(t){return e.ebook.name=t})},null,8,["value"])]})),_:1}),Object(a["o"])(l,{label:"Category"},{default:Object(a["X"])((function(){return[Object(a["o"])(m,{value:e.categoryIds,"onUpdate:value":t[5]||(t[5]=function(t){return e.categoryIds=t}),"field-names":{label:"name",value:"id",children:"children"},options:e.level1},null,8,["value","options"])]})),_:1}),Object(a["o"])(l,{label:"Description"},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{value:e.ebook.description,"onUpdate:value":t[6]||(t[6]=function(t){return e.ebook.description=t}),type:"textarea"},null,8,["value"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","confirm-loading","onOk"])],64)}var Se=Object(a["p"])({name:"AdminEbook",setup:function(){var e=Object(a["K"])();e.value={};var t,n=Object(a["K"])(),o=Object(a["K"])({current:1,pageSize:10,total:0}),c=Object(a["K"])(!1),u=[{title:"Cover",dataIndex:"cover",slots:{customRender:"cover"}},{title:"Name",dataIndex:"name"},{title:"Category",slots:{customRender:"category"}},{title:"Document Count",dataIndex:"docCount"},{title:"View Count",dataIndex:"viewCount"},{title:"Vote Count",dataIndex:"voteCount"},{title:"Action",key:"action",slots:{customRender:"action"}}],r=function(t){c.value=!0,n.value=[],g.a.get("/ebook/list",{params:{page:t.page,size:t.size,name:e.value.name}}).then((function(e){c.value=!1;var a=e.data;a.success?(n.value=a.content.list,o.value.current=t.page,o.value.total=a.content.total):y["a"].error(a.message)}))},l=function(e){console.log("看看自带的分页参数都有啥："+e),r({page:e.current,size:e.pageSize})},i=Object(a["K"])(),s=Object(a["K"])(),b=Object(a["K"])(!1),d=Object(a["K"])(!1),j=function(){d.value=!0,s.value.category1Id=i.value[0],s.value.category2Id=i.value[1],s.value.docCount=0,s.value.viewCount=0,s.value.voteCount=0,g.a.post("/ebook/save",s.value).then((function(e){d.value=!1;var t=e.data;t.success?(b.value=!1,r({page:o.value.current,size:o.value.pageSize})):y["a"].error(t.message)}))},f=function(e){b.value=!0,s.value=S.copy(e),i.value=[s.value.category1Id,s.value.category2Id]},O=function(){b.value=!0,s.value={}},v=function(e){g.a.delete("/ebook/delete/"+e).then((function(e){var t=e.data;t.success&&r({page:o.value.current,size:o.value.pageSize})}))},m=Object(a["K"])(),p=function(){c.value=!0,g.a.get("/category/all").then((function(e){c.value=!1;var n=e.data;n.success?(t=n.content,console.log("original arrays：",t),m.value=[],m.value=S.arrayToTree(t,0),console.log("tree form：",m.value),r({page:1,size:o.value.pageSize})):y["a"].error(n.message)}))},h=function(e){var n="";return t.forEach((function(t){t.id===e&&(n=t.name)})),n};return Object(a["C"])((function(){p()})),{param:e,ebooks:n,pagination:o,columns:u,loading:c,handleTableChange:l,handleQuery:r,getCategoryName:h,edit:f,add:O,ebook:s,modalVisible:b,modalLoading:d,handleModalOk:j,categoryIds:i,level1:m,del:v}}});n("13fc");const Ue=C()(Se,[["render",Ie],["__scopeId","data-v-0b8b19d2"]]);var Me=Ue,Ve=Object(a["n"])(" search "),Fe=Object(a["n"])(" create "),Ee=["src"],Te=Object(a["n"])(" edit "),Ae=Object(a["n"])(" delete "),Re=Object(a["n"])(" no ");function Qe(e,t,n,o,c,u){var r=Object(a["N"])("a-button"),l=Object(a["N"])("a-form-item"),i=Object(a["N"])("a-form"),s=Object(a["N"])("a-popconfirm"),b=Object(a["N"])("a-space"),d=Object(a["N"])("a-table"),j=Object(a["N"])("a-layout-content"),f=Object(a["N"])("a-layout"),O=Object(a["N"])("a-input"),v=Object(a["N"])("a-select-option"),m=Object(a["N"])("a-select"),p=Object(a["N"])("a-modal");return Object(a["F"])(),Object(a["l"])(a["b"],null,[Object(a["o"])(f,null,{default:Object(a["X"])((function(){return[Object(a["o"])(j,{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},{default:Object(a["X"])((function(){return[Object(a["m"])("p",null,[Object(a["o"])(i,{layout:"inline",model:e.param},{default:Object(a["X"])((function(){return[Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"primary",onClick:t[0]||(t[0]=function(t){return e.handleQuery()})},{default:Object(a["X"])((function(){return[Ve]})),_:1})]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"primary",onClick:t[1]||(t[1]=function(t){return e.add()})},{default:Object(a["X"])((function(){return[Fe]})),_:1})]})),_:1})]})),_:1},8,["model"])]),Object(a["o"])(d,{columns:e.columns,"row-key":function(e){return e.id},"data-source":e.level1,loading:e.loading,pagination:!1},{cover:Object(a["X"])((function(e){var t=e.text;return[t?(Object(a["F"])(),Object(a["l"])("img",{key:0,src:t,alt:"avatar"},null,8,Ee)):Object(a["k"])("",!0)]})),action:Object(a["X"])((function(t){t.text;var n=t.record;return[Object(a["o"])(b,{size:"small"},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"primary",onClick:function(t){return e.edit(n)}},{default:Object(a["X"])((function(){return[Te]})),_:2},1032,["onClick"]),Object(a["o"])(s,{title:"Are you sure you want to delete this book?","ok-text":"Yes","cancel-text":"No",onConfirm:function(t){return e.del(n.id)}},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"danger"},{default:Object(a["X"])((function(){return[Ae]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:2},1024)]})),_:1},8,["columns","row-key","data-source","loading"])]})),_:1})]})),_:1}),Object(a["o"])(p,{title:"分类表单",visible:e.modalVisible,"onUpdate:visible":t[6]||(t[6]=function(t){return e.modalVisible=t}),"confirm-loading":e.modalLoading,onOk:e.handleModalOk},{default:Object(a["X"])((function(){return[Object(a["o"])(i,{model:e.category,"label-col":{span:6},"wrapper-col":{span:18}},{default:Object(a["X"])((function(){return[Object(a["o"])(l,{label:"Name"},{default:Object(a["X"])((function(){return[Object(a["o"])(O,{value:e.category.name,"onUpdate:value":t[2]||(t[2]=function(t){return e.category.name=t})},null,8,["value"])]})),_:1}),Object(a["o"])(l,{label:"Sort"},{default:Object(a["X"])((function(){return[Object(a["o"])(O,{value:e.category.sort,"onUpdate:value":t[3]||(t[3]=function(t){return e.category.sort=t})},null,8,["value"])]})),_:1}),Object(a["o"])(l,{label:"Parent Category"},{default:Object(a["X"])((function(){return[Object(a["o"])(O,{value:e.category.parent,"onUpdate:value":t[4]||(t[4]=function(t){return e.category.parent=t})},null,8,["value"]),Object(a["o"])(m,{value:e.category.parent,"onUpdate:value":t[5]||(t[5]=function(t){return e.category.parent=t}),ref:"select"},{default:Object(a["X"])((function(){return[Object(a["o"])(v,{value:"0"},{default:Object(a["X"])((function(){return[Re]})),_:1}),(Object(a["F"])(!0),Object(a["l"])(a["b"],null,Object(a["M"])(e.level1,(function(t){return Object(a["F"])(),Object(a["j"])(v,{key:t.id,value:t.id,disabled:e.category.id===t.id},{default:Object(a["X"])((function(){return[Object(a["n"])(Object(a["Q"])(t.name),1)]})),_:2},1032,["value","disabled"])})),128))]})),_:1},8,["value"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","confirm-loading","onOk"])],64)}var Le=Object(a["p"])({name:"AdminCategory",setup:function(){var e=Object(a["K"])();e.value={};var t=Object(a["K"])(),n=Object(a["K"])(!1),o=[{title:"Name",dataIndex:"name"},{title:"Parent Category",key:"parent",dataIndex:"parent"},{title:"Sort",dataIndex:"sort"},{title:"Action",key:"action",slots:{customRender:"action"}}],c=Object(a["K"])(),u=function(){n.value=!0,c.value=[],g.a.get("/category/all").then((function(e){n.value=!1;var a=e.data;a.success?(t.value=a.content,console.log("原始数组",t.value),c.value=[],c.value=S.arrayToTree(t.value,0),console.log("树型结构",c)):y["a"].error(a.message)}))},r=Object(a["K"])({}),l=Object(a["K"])(!1),i=Object(a["K"])(!1),s=function(){i.value=!0,g.a.post("/category/save",r.value).then((function(e){i.value=!1;var t=e.data;t.success?(l.value=!1,u()):y["a"].error(t.message)}))},b=function(e){l.value=!0,r.value=S.copy(e)},d=function(){l.value=!0,r.value={}},j=function(e){g.a.delete("/category/delete/"+e).then((function(e){var t=e.data;t.success&&u()}))};return Object(a["C"])((function(){u()})),Object(a["C"])((function(){u()})),{param:e,level1:c,columns:o,loading:n,handleQuery:u,edit:b,add:d,category:r,modalVisible:l,modalLoading:i,handleModalOk:s,del:j}}});n("1964");const He=C()(Le,[["render",Qe],["__scopeId","data-v-0e6e062b"]]);var De=He,Pe=function(e){return Object(a["I"])("data-v-4666c0c5"),e=e(),Object(a["G"])(),e},qe=Object(a["n"])(" search "),Ye=Object(a["n"])(" create "),We=Object(a["n"])(" edit "),Je=Object(a["n"])(" delete "),Be=Object(a["n"])(" Save "),Ge=Object(a["n"])(" content preview "),Ze=Pe((function(){return Object(a["m"])("div",{id:"content"},null,-1)})),$e=["innerHTML"];function et(e,t,n,o,c,u){var r=Object(a["N"])("a-button"),l=Object(a["N"])("a-form-item"),i=Object(a["N"])("a-form"),s=Object(a["N"])("a-popconfirm"),b=Object(a["N"])("a-space"),d=Object(a["N"])("a-table"),j=Object(a["N"])("a-col"),f=Object(a["N"])("a-input"),O=Object(a["N"])("a-tree-select"),v=Object(a["N"])("EyeOutlined"),m=Object(a["N"])("a-row"),p=Object(a["N"])("a-drawer"),g=Object(a["N"])("a-layout-content"),y=Object(a["N"])("a-layout");return Object(a["F"])(),Object(a["j"])(y,null,{default:Object(a["X"])((function(){return[Object(a["o"])(g,{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},{default:Object(a["X"])((function(){return[Object(a["o"])(m,{gutter:24},{default:Object(a["X"])((function(){return[Object(a["o"])(j,{span:8},{default:Object(a["X"])((function(){return[Object(a["m"])("p",null,[Object(a["o"])(i,{layout:"inline",model:e.param},{default:Object(a["X"])((function(){return[Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"primary",onClick:t[0]||(t[0]=function(t){return e.handleQuery()})},{default:Object(a["X"])((function(){return[qe]})),_:1})]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"primary",onClick:t[1]||(t[1]=function(t){return e.add()})},{default:Object(a["X"])((function(){return[Ye]})),_:1})]})),_:1})]})),_:1},8,["model"])]),e.level1.length>0?(Object(a["F"])(),Object(a["j"])(d,{key:0,columns:e.columns,"row-key":function(e){return e.id},"data-source":e.level1,loading:e.loading,pagination:!1,size:"small",defaultExpandAllRows:!0},{name:Object(a["X"])((function(t){var n=t.text;return[Object(a["n"])(Object(a["Q"])(n.sort)+" "+Object(a["Q"])(e.text),1)]})),action:Object(a["X"])((function(t){t.text;var n=t.record;return[Object(a["o"])(b,{size:"small"},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"primary",onClick:function(t){return e.edit(n)},size:"small"},{default:Object(a["X"])((function(){return[We]})),_:2},1032,["onClick"]),Object(a["o"])(s,{title:"Are you sure you want to delete?","ok-text":"Yes","cancel-text":"No",onConfirm:function(t){return e.del(n.id)}},{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"danger",size:"small"},{default:Object(a["X"])((function(){return[Je]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:2},1024)]})),_:1},8,["columns","row-key","data-source","loading"])):Object(a["k"])("",!0)]})),_:1}),Object(a["o"])(j,{span:16},{default:Object(a["X"])((function(){return[Object(a["m"])("p",null,[Object(a["o"])(i,{layout:"inline",model:e.param},{default:Object(a["X"])((function(){return[Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"primary",onClick:t[2]||(t[2]=function(t){return e.handleSave()})},{default:Object(a["X"])((function(){return[Be]})),_:1})]})),_:1})]})),_:1},8,["model"])]),Object(a["o"])(i,{model:e.doc,layout:"vertical"},{default:Object(a["X"])((function(){return[Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(f,{value:e.doc.name,"onUpdate:value":t[3]||(t[3]=function(t){return e.doc.name=t}),placeholder:"name"},null,8,["value"])]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(O,{value:e.doc.parent,"onUpdate:value":t[4]||(t[4]=function(t){return e.doc.parent=t}),style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.treeSelectData,placeholder:"Please select parent doc","tree-default-expand-all":"",replaceFields:{title:"name",key:"id",value:"id"}},null,8,["value","tree-data"])]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(f,{value:e.doc.sort,"onUpdate:value":t[5]||(t[5]=function(t){return e.doc.sort=t}),placeholder:"sort"},null,8,["value"])]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Object(a["o"])(r,{type:"primary",onClick:t[6]||(t[6]=function(t){return e.handlePreviewContent()})},{default:Object(a["X"])((function(){return[Object(a["o"])(v),Ge]})),_:1})]})),_:1}),Object(a["o"])(l,null,{default:Object(a["X"])((function(){return[Ze]})),_:1})]})),_:1},8,["model"])]})),_:1})]})),_:1}),Object(a["o"])(p,{width:"900",placement:"right",closable:!1,visible:e.drawerVisible,onClose:e.onDrawerClose},{default:Object(a["X"])((function(){return[Object(a["m"])("div",{class:"wangeditor",innerHTML:e.previewHtml},null,8,$e)]})),_:1},8,["visible","onClose"])]})),_:1})]})),_:1})}var tt=n("ed3b"),nt=n("96d9"),at=n("6fad"),ot=n.n(at),ct=Object(a["p"])({name:"AdminDoc",setup:function(){var e=Object(R["c"])(),t=Object(a["K"])();t.value={};var n=Object(a["K"])(),o=Object(a["K"])(!1),c=Object(a["K"])();c.value=[];var u=[{title:"Name",dataIndex:"name",slots:{customRender:"Name"}},{title:"Action",key:"action",slots:{customRender:"action"}}],r=Object(a["K"])();r.value=[];var l=function(){o.value=!0,r.value=[],g.a.get("/doc/all/"+e.query.ebookId).then((function(e){o.value=!1;var t=e.data;t.success?(n.value=t.content,console.log("original array",n.value),r.value=[],r.value=S.arrayToTree(n.value,0),console.log("tree form",r),c.value=S.copy(r.value)||[],c.value.unshift({id:0,name:"no"})):y["a"].error(t.message)}))},i=Object(a["K"])();i.value={ebookId:e.query.ebookId};var s=Object(a["K"])(!1),b=Object(a["K"])(!1),d=new ot.a("#content");d.config.zIndex=0;var j=function(){b.value=!0,i.value.content=d.txt.html(),g.a.post("/doc/save",i.value).then((function(e){b.value=!1;var t=e.data;t.success?(y["a"].success("Save successfully!"),l()):y["a"].error(t.message)}))},f=function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a.id===t){console.log("disabled",a),a.disabled=!0;var o=a.children;if(S.isNotEmpty(o))for(var c=0;c<o.length;c++)f(o,o[c].id)}else{o=a.children;S.isNotEmpty(o)&&f(o,t)}}},O=[],v=[],m=function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a.id===t){console.log("delete",a),O.push(t),v.push(a.name);var o=a.children;if(S.isNotEmpty(o))for(var c=0;c<o.length;c++)m(o,o[c].id)}else{o=a.children;S.isNotEmpty(o)&&m(o,t)}}},p=function(){g.a.get("/doc/find-content/"+i.value.id).then((function(e){var t=e.data;t.success?d.txt.html(t.content):y["a"].error(t.message)}))},h=function(e){d.txt.html(""),s.value=!0,i.value=S.copy(e),p(),c.value=S.copy(r.value),f(c.value,e.id),c.value.unshift({id:0,name:"no"})},k=function(){d.txt.html(""),s.value=!0,i.value={ebookId:e.query.ebookId},c.value=S.copy(r.value)||[],c.value.unshift({id:0,name:"no"})},_=function(e){O.length=0,v.length=0,m(r.value,e),tt["a"].confirm({title:"important warning",icon:Object(a["o"])(nt["a"]),content:"delete"+v.join("，")+"are you sure?",onOk:function(){g.a.delete("/doc/delete/"+O.join(",")).then((function(e){var t=e.data;t.success&&l()}))}})},X=Object(a["K"])(!1),w=Object(a["K"])(),N=function(){var e=d.txt.html();w.value=e,X.value=!0},C=function(){X.value=!1};return Object(a["C"])((function(){l(),d.create()})),{param:t,level1:r,columns:u,loading:o,handleQuery:l,edit:h,add:k,doc:i,modalVisible:s,modalLoading:b,handleSave:j,del:_,treeSelectData:c,drawerVisible:X,previewHtml:w,handlePreviewContent:N,onDrawerClose:C}}});n("eadb");const ut=C()(ct,[["render",et],["__scopeId","data-v-4666c0c5"]]);var rt=ut,lt=[{path:"/",name:"Home",component:ee},{path:"/doc",name:"Doc",component:Oe},{path:"/about",name:"About",component:re},{path:"/admin/user",name:"AdminUser",component:Xe,meta:{loginRequire:!0}},{path:"/admin/ebook",name:"AdminEbook",component:Me,meta:{loginRequire:!0}},{path:"/admin/category",name:"AdminCategory",component:De,meta:{loginRequire:!0}},{path:"/admin/doc",name:"AdminDoc",component:rt,meta:{loginRequire:!0}}],it=Object(R["a"])({history:Object(R["b"])(""),routes:lt});it.beforeEach((function(e,t,n){if(e.matched.some((function(e){return console.log(e,"是否需要登录校验：",e.meta.loginRequire),e.meta.loginRequire}))){var a=X.state.user;S.isEmpty(a)?(console.log("用户未登录！"),n("/")):n()}else n()}));var st=it,bt=n("f23d"),dt=(n("202f"),n("8520"));g.a.defaults.baseURL="";var jt=Object(a["i"])(A);jt.use(X).use(st).use(bt["a"]).mount("#app");var ft=dt;for(var Ot in ft)jt.component(Ot,ft[Ot]);g.a.interceptors.request.use((function(e){console.log("request：",e);var t=X.state.user.token;return S.isNotEmpty(t)&&(e.headers.token=t,console.log("请求headers增加token:",t)),console.log("return config"),e}),(function(e){return Promise.reject(e)})),g.a.interceptors.response.use((function(e){return console.log("return res：",e),e}),(function(e){return console.log("return res：",e),Promise.reject(e)})),console.log("environment:","production")},d0ed:function(e,t,n){},d58e:function(e,t,n){"use strict";n("6cf4")},d64b:function(e,t,n){"use strict";n("72c2")},eadb:function(e,t,n){"use strict";n("9649")}});
//# sourceMappingURL=app.4d85ca54.js.map